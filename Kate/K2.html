<!DOCTYPE html>
<html>
<title>Online CSS Editor</title>
<head>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" />
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>

/* Add styles for 'hidden' class */

</style>
<link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="approvedBox">Your loan application has been approved</div>
    <div class="deniedBox">Unfortunately, your loan application has been denied</div>
<div>
    <div class = "Applicationbox">
<div class = "myApplicationFlex">
    
    <button class ="info" id="button" onclick="togglePopup()">&#9432</button>
    <span class="infotooltip">info</span>
    
    <div class="popup" id="popup-1">
        <div class="overlay"></div>
        <div class="content">
        <div class="close-btn" onclick="togglePopup()">&times;</div>
        <p style="font-weight: normal;
        font-size: 15px;">This is the status section of Facet! This application displays all features used in the application and shows the status of an application.</p>
        </div>
        </div>
        
        
    <span style="color:Orange; margin-left:-23px; white-space: nowrap;">My Application</span>
    <span class = "statusApp">Status: Approved</span>
    <span class = "statusDenied">Status: Denied</span>
    
    <button class="expand" id="button" onclick="exTogglePopup()">&#10530</button>
    <span class="tooltip">Expand</span>

    <div class="exPopup" id="exPopup-1">
        <div class="exOverlay"></div>
        <div class="exContent">
        <div class="exClose-btn" onclick="exTogglePopup(); resetExPopupDimensions()">&times;</div>
            <table style="width: 545px; height: 40px;  border-spacing:10px; margin-left: 10px;">
                <!--<div class="divScroll">-->
                <div class="row-container" id="rowContainer2">
                </div>
                </table>
        </div>
        </div>


</div>
<span style="color:Black; margin-left: 10px;">____________________________________________________________________</span>
<div class="row-container" id="rowContainer">
    
    <!-- Headers and corresponding data will be populated here -->
</div>
<button id="prevBtn">Previous</button>
<button id="nextBtn">Next</button>

    <script>
        function togglePopup(){
document.getElementById("popup-1").classList.toggle("active");
        }

        function exTogglePopup(){
document.getElementById("exPopup-1").classList.toggle("active");
        }
        
        </script>
<script>

document.addEventListener('DOMContentLoaded', function () {
    let currentIndex = 1; // Start from the second dataset
    let numberOfRows = 0;

    // Function to update the displayed data
    function updateData() {
        // Fetch CSV file and convert to an array of objects
        fetch('loans_continuous.csv')
            .then(response => response.text())
            .then(data => {
                const rows = data.trim().split('\n');
                const headers = rows[0].split(',');
                const dataRow = rows[currentIndex].split(',');

                const rowContainer = document.getElementById('rowContainer');
                const rowContainer2 = document.getElementById('rowContainer2');
                const loanStatus = dataRow[headers.indexOf('Loan_Status')]; // Get the loan_status value

                // Clear previous content
                rowContainer.innerHTML = '';
                rowContainer2.innerHTML = '';

                // Add headers and corresponding data
                for (let i = 0; i < headers.length; i++) {
                    const div = document.createElement('div');
                    const dataValue = dataRow[i] ? dataRow[i] : '0'; // If data is blank, use '0'
                    // Use Ultity functions here
                    div.innerHTML = `<strong>${headers[i]}:</strong> ${dataValue}`;

                    rowContainer.appendChild(div);
                }

                for (let i = 0; i < headers.length; i++) {
                    const div = document.createElement('div');
                    const dataValue = dataRow[i] ? dataRow[i] : '0'; // If data is blank, use '0'
                    div.innerHTML = `<strong>${headers[i]}:</strong> ${dataValue}`;

                    rowContainer2.appendChild(div);
                }

                // Toggle visibility based on Loan_Status
                const approvedBox = document.querySelector('.approvedBox');
                const deniedBox = document.querySelector('.deniedBox');

                const statusApp = document.querySelector('.statusApp');
                const statusDenied = document.querySelector('.statusDenied');

                appStatus = dataRow[4];
                console.log(appStatus);
                if (String(appStatus).trim() === "Y") {
                    approvedBox.style.display = 'block';
                    deniedBox.style.display = 'none';
                    statusApp.style.display = 'block';
                    statusDenied.style.display = 'none';
                } 
                else if (String(appStatus).trim() === "N") {
                    approvedBox.style.display = 'none';
                    deniedBox.style.display = 'block';
                    statusApp.style.display = 'none';
                    statusDenied.style.display = 'block';
                }
            })
            .catch(error => console.error('Error fetching CSV file:', error));
    }

    // Function to handle moving to the previous data
    function movePrev() {
        currentIndex = Math.max(1, currentIndex - 1);
        updateData();
    }

    // Function to handle moving to the next data
    function moveNext() {
        currentIndex = Math.min(currentIndex + 1, numberOfRows - 1);
        updateData();
    }

    // Initial data load
    fetch('loans_continuous.csv')
        .then(response => response.text())
        .then(data => {
            numberOfRows = data.trim().split('\n').length;
            updateData();
        })
        .catch(error => console.error('Error fetching CSV file:', error));

    // Button event listeners
    document.getElementById('prevBtn').addEventListener('click', movePrev);
    document.getElementById('nextBtn').addEventListener('click', moveNext);
});
</script>

<script>
const exPopup = document.getElementById('exPopup-1');
let isResizing = false;
let originalWidth, originalHeight;

exPopup.addEventListener('mousedown', (e) => {
    if (e.target.classList.contains('resizer')) {
        isResizing = true;
        originalWidth = exPopup.offsetWidth; // Capture the original width
        originalHeight = exPopup.offsetHeight; // Capture the original height
        document.addEventListener('mousemove', handleMouseMove);
        document.addEventListener('mouseup', () => {
            isResizing = false;
            document.removeEventListener('mousemove', handleMouseMove);
        });
    }
});

function handleMouseMove(e) {
    if (isResizing) {
        const newWidth = originalWidth + e.clientX - exPopup.getBoundingClientRect().right;
        const newHeight = originalHeight + e.clientY - exPopup.getBoundingClientRect().bottom;

        // Restrict resizing to the right and downwards
        exPopup.style.width = newWidth > 0 ? newWidth + 'px' : '0';
        exPopup.style.height = newHeight > 0 ? newHeight + 'px' : '0';
    }
}
</script>
</body>
</html>